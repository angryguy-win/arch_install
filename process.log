  [DEBUG]  ======================= Starting Main Installation Process =======================
  [DEBUG]  Start time:  2024-10-09 12:17:31
 [PROC]  Starting process:  Main Installation Process (ID: 1728476251) 2024-10-09 12:17:31
  [DEBUG]  ======================= Starting Main Installation Process  =======================
 
-------------------------------------------------------------------------

                 █████╗ ██████╗  ██████ ██╗  ██╗
                ██╔══██╗██╔══██╗██╔════╝██║  ██║
                ███████║██████╔╝██║     ███████║ 
                ██╔══██║██╔══██╗██║     ██╔══██║
                ██║  ██║██║  ██║╚██████╗██║  ██║
                ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝
------------------------------------------------------------------------
                 Main Installation Process
------------------------------------------------------------------------

 [INFO]  Welcome to the Arch Linux installer script
 [PROC]  DRY_RUN is set to: true
  [DEBUG]  From the install.sh file in the: /home/ssnow/Documents/GitHub/arch_install
  [DEBUG]  Lib.sh file in the: /home/ssnow/Documents/GitHub/arch_install/lib/lib.sh
  [DEBUG]  ARCH_DIR: /home/ssnow/Documents/GitHub/arch_install
  [DEBUG]  SCRIPTS_DIR: /home/ssnow/Documents/GitHub/arch_install/scripts
  [DEBUG]  CONFIG_FILE: /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [INFO]  Reading configuration from /home/ssnow/Documents/GitHub/arch_install/arch_config.toml
  [OK]  Configuration loaded into: /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Exporting variables from:  /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  PARALLEL_JOBS=8
  [DEBUG]  SYSTEM_INSTALLATION=false
  [DEBUG]  COUNTRY_ISO=CA
  [DEBUG]  BIOS_TYPE=hybrid
  [DEBUG]  FILE_SYSTEM_TYPE=btrfs
  [DEBUG]  FORMAT_TYPE=btrfs
  [DEBUG]  INSTALL_DEVICE=
  [DEBUG]  DEVICE=
  [DEBUG]  PARTITION_BOOT=
  [DEBUG]  PARTITION_EFI=
  [DEBUG]  PARTITION_ROOT=
  [DEBUG]  PARTITION_HOME=
  [DEBUG]  PARTITION_SWAP=
  [DEBUG]  SUBVOLUMES=@home,@var,@.snapshots
  [DEBUG]  MOUNT_OPTIONS=noatime,compress=zstd,ssd,commit=120
  [DEBUG]  LUKS=false
  [DEBUG]  LUKS_PASSWORD=changeme
  [DEBUG]  SWAP=false
  [DEBUG]  EFI_SIZE=1024
  [DEBUG]  SWAP_SIZE=4
  [DEBUG]  ROOT_SIZE=32
  [DEBUG]  HOME=false
  [DEBUG]  LOCALE=en_US.UTF-8
  [DEBUG]  TIMEZONE=America/Toronto
  [DEBUG]  KEYMAP=us
  [DEBUG]  USERNAME=ssnow
  [DEBUG]  PASSWORD=changeme
  [DEBUG]  HOSTNAME=arch
  [DEBUG]  MICROCODE=amd
  [DEBUG]  INITRD_MICROCODE=amd-ucode.img
  [DEBUG]  TERMINAL=alacritty
  [DEBUG]  SHELL=bash
  [DEBUG]  EDITOR=nvim
  [DEBUG]  DESKTOP_ENVIRONMENT=gnome
  [DEBUG]  CPU_VENDOR=amd
  [DEBUG]  GPU_VENDOR=amd
  [DEBUG]  GPU=amd
  [DEBUG]  GPU_DRIVER=amdgpu
  [DEBUG]  THEME=nordic
  [OK]  Configuration loaded successfully
  [DEBUG]  FORMAT_TYPE: btrfs
  [DEBUG]  DESKTOP_ENVIRONMENT: gnome
  [DEBUG]  === Checking for missing required scripts ===
  [OK]  All required scripts are present.
 [INFO]  Executing: 1-pre/pre-setup.sh
  [DEBUG]  Start time:  2024-10-09 12:17:32
 [PROC]  Starting process:  Pre-setup (ID: 1728476252) 2024-10-09 12:17:32
  [DEBUG]  ======================= Starting Pre-setup  =======================
 
-------------------------------------------------------------------------

                 █████╗ ██████╗  ██████ ██╗  ██╗
                ██╔══██╗██╔══██╗██╔════╝██║  ██║
                ███████║██████╔╝██║     ███████║ 
                ██╔══██║██╔══██╗██║     ██╔══██║
                ██║  ██║██║  ██║╚██████╗██║  ██║
                ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝
------------------------------------------------------------------------
                 Pre-setup
------------------------------------------------------------------------

 [INFO]  Starting pre-setup process
 [INFO]  DRY_RUN in pre-setup.sh is set to: true
 [INFO]  Starting initial setup
 [INFO]  Starting: Initial setup
 [ACTION]  [DRY RUN] Would execute: timedatectl set-ntp true
 [INFO]  Starting: Mirror setup
 [ACTION]  [DRY RUN] Would execute: cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup
 [ACTION]  Setting:  COUNTRY_ISO=CA in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  COUNTRY_ISO=CA in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Creating mount point if it doesn't exist
 [ACTION]  Installing prerequistes: 
 [INFO]  Starting: Creating /mnt and installing prerequistes
 [ACTION]  [DRY RUN] Would execute: pacman -S --noconfirm --needed gptfdisk btrfs-progs glibcumount -A --recursive /mnt
  [OK]  Pre-setup process completed successfully
 [PROC]  Process completed successfully:  Pre-setup (ID: 1728476252)
 Process start 2024-10-09 12:17:32, end 2024-10-09 12:17:32, time 00:00:00
  [DEBUG]  ======================= Ending Pre-setup  =======================
 [INFO]  All processes allmost completed.....
 [INFO]  Exit handler called with exit code:  0
 [INFO]  Script execution completed successfully
 [ACTION]  Successfully executed: /home/ssnow/Documents/GitHub/arch_install/scripts/1-pre/pre-setup.sh
 [INFO]  Executing: 1-pre/run-checks.sh
  [DEBUG]  Start time:  2024-10-09 12:17:34
 [PROC]  Starting process:  Run Checks: pre-install preparations (ID: 1728476254) 2024-10-09 12:17:34
  [DEBUG]  ======================= Starting Run Checks: pre-install preparations  =======================
 
-------------------------------------------------------------------------

                 █████╗ ██████╗  ██████ ██╗  ██╗
                ██╔══██╗██╔══██╗██╔════╝██║  ██║
                ███████║██████╔╝██║     ███████║ 
                ██╔══██║██╔══██╗██║     ██╔══██║
                ██║  ██║██║  ██║╚██████╗██║  ██║
                ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝
------------------------------------------------------------------------
                 Run Checks: pre-install preparations
------------------------------------------------------------------------

 [INFO]  Starting the run checks process
 [INFO]  Dry-run: no root check needed
 [INFO]  Setting up the necessary passwords
Type ssnow password: 
Retype ssnow password: 
 [INFO]  Checking internet connection...
  [OK]  Internet connection is available
 [INFO]  Here a list of availble drives[]
      1) sda     931.5G Samsung SSD 870 QVO 1TB
      2) nvme0n1   1.8T Samsung SSD 980 PRO 2TB
      3) nvme1n1 931.5G Samsung SSD 980 PRO 1TB
      4) nvme3n1 931.5G Sabrent SB-RKT4P-1TB
      5) nvme2n1 476.9G Samsung SSD 960 PRO 512GB
Enter the number of the drive you want to use:  [ACTION]  You selected drive:  /dev/nvme0n1
 [ACTION]  Setting:  INSTALL_DEVICE=/dev/nvme0n1 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  INSTALL_DEVICE=/dev/nvme0n1 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  DEVICE=/dev/nvme0n1 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  DEVICE=/dev/nvme0n1 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  INSTALL_DEVICE set to:  /dev/nvme0n1
  [DEBUG]  Preparing the install device /dev/nvme0n1 to partition 
  [DEBUG]  BIOS type set to: hybrid
 [ACTION]  Setting:  BIOS_TYPE=hybrid in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  BIOS_TYPE=hybrid in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [INFO]  Preparing drive partitions settings: 
 [ACTION]  Setting:  PARTITION_BOOT=/dev/nvme0n1p1 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  PARTITION_BOOT=/dev/nvme0n1p1 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  PARTITION_EFI=/dev/nvme0n1p2 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  PARTITION_EFI=/dev/nvme0n1p2 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  PARTITION_ROOT=/dev/nvme0n1p3 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  PARTITION_ROOT=/dev/nvme0n1p3 in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Exporting variables from:  /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  PARALLEL_JOBS=8
  [DEBUG]  SYSTEM_INSTALLATION=false
  [DEBUG]  COUNTRY_ISO=CA
  [DEBUG]  BIOS_TYPE=hybrid
  [DEBUG]  FILE_SYSTEM_TYPE=btrfs
  [DEBUG]  FORMAT_TYPE=btrfs
  [DEBUG]  INSTALL_DEVICE=/dev/nvme0n1
  [DEBUG]  DEVICE=/dev/nvme0n1
  [DEBUG]  PARTITION_BOOT=/dev/nvme0n1p1
  [DEBUG]  PARTITION_EFI=/dev/nvme0n1p2
  [DEBUG]  PARTITION_ROOT=/dev/nvme0n1p3
  [DEBUG]  PARTITION_HOME=
  [DEBUG]  PARTITION_SWAP=
  [DEBUG]  SUBVOLUMES=@home,@var,@.snapshots
  [DEBUG]  MOUNT_OPTIONS=noatime,compress=zstd,ssd,commit=120
  [DEBUG]  LUKS=false
  [DEBUG]  LUKS_PASSWORD=changeme
  [DEBUG]  SWAP=false
  [DEBUG]  EFI_SIZE=1024
  [DEBUG]  SWAP_SIZE=4
  [DEBUG]  ROOT_SIZE=32
  [DEBUG]  HOME=false
  [DEBUG]  LOCALE=en_US.UTF-8
  [DEBUG]  TIMEZONE=America/Toronto
  [DEBUG]  KEYMAP=us
  [DEBUG]  USERNAME=ssnow
  [DEBUG]  PASSWORD=changeme
  [DEBUG]  HOSTNAME=arch
  [DEBUG]  MICROCODE=amd
  [DEBUG]  INITRD_MICROCODE=amd-ucode.img
  [DEBUG]  TERMINAL=alacritty
  [DEBUG]  SHELL=bash
  [DEBUG]  EDITOR=nvim
  [DEBUG]  DESKTOP_ENVIRONMENT=gnome
  [DEBUG]  CPU_VENDOR=amd
  [DEBUG]  GPU_VENDOR=amd
  [DEBUG]  GPU=amd
  [DEBUG]  GPU_DRIVER=amdgpu
  [DEBUG]  THEME=nordic
  [OK]  Configuration loaded successfully
 [ACTION]  Partition string set to: /dev/nvme0n1p1, /dev/nvme0n1p2, /dev/nvme0n1p3, , 
 [ACTION]  Setting:  MICROCODE=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  MICROCODE=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100    15  100    15    0     0     67      0 --:--:-- --:--:-- --:--:--    67
 [ACTION]  Setting:  TIMEZONE=America/Toronto in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  TIMEZONE=America/Toronto in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  GPU_VENDOR=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  GPU_VENDOR=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  GPU_DRIVER=xf86-video-amdgpu in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  GPU_DRIVER=xf86-video-amdgpu in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [INFO]  Detected GPU Vendor: amd
 [INFO]  Selected GPU Driver: xf86-video-amdgpu
 [ACTION]  Setting:  BIOS_TYPE=uefi in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  BIOS_TYPE=uefi in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  CPU_VENDOR=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  CPU_VENDOR=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  GPU_VENDOR=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  GPU_VENDOR=amd in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  INITRD_MICROCODE=amd-ucode.img in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  INITRD_MICROCODE=amd-ucode.img in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
 [ACTION]  Setting:  SYSTEM_INSTALLATION=false in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Updated:  SYSTEM_INSTALLATION=false in /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  Exporting variables from:  /home/ssnow/Documents/GitHub/arch_install/arch_config.cfg
  [DEBUG]  PARALLEL_JOBS=8
  [DEBUG]  SYSTEM_INSTALLATION=false
  [DEBUG]  COUNTRY_ISO=CA
  [DEBUG]  BIOS_TYPE=uefi
  [DEBUG]  FILE_SYSTEM_TYPE=btrfs
  [DEBUG]  FORMAT_TYPE=btrfs
  [DEBUG]  INSTALL_DEVICE=/dev/nvme0n1
  [DEBUG]  DEVICE=/dev/nvme0n1
  [DEBUG]  PARTITION_BOOT=/dev/nvme0n1p1
  [DEBUG]  PARTITION_EFI=/dev/nvme0n1p2
  [DEBUG]  PARTITION_ROOT=/dev/nvme0n1p3
  [DEBUG]  PARTITION_HOME=
  [DEBUG]  PARTITION_SWAP=
  [DEBUG]  SUBVOLUMES=@home,@var,@.snapshots
  [DEBUG]  MOUNT_OPTIONS=noatime,compress=zstd,ssd,commit=120
  [DEBUG]  LUKS=false
  [DEBUG]  LUKS_PASSWORD=changeme
  [DEBUG]  SWAP=false
  [DEBUG]  EFI_SIZE=1024
  [DEBUG]  SWAP_SIZE=4
  [DEBUG]  ROOT_SIZE=32
  [DEBUG]  HOME=false
  [DEBUG]  LOCALE=en_US.UTF-8
  [DEBUG]  TIMEZONE=America/Toronto
  [DEBUG]  KEYMAP=us
  [DEBUG]  USERNAME=ssnow
  [DEBUG]  PASSWORD=changeme
  [DEBUG]  HOSTNAME=arch
  [DEBUG]  MICROCODE=amd
  [DEBUG]  INITRD_MICROCODE=amd-ucode.img
  [DEBUG]  TERMINAL=alacritty
  [DEBUG]  SHELL=bash
  [DEBUG]  EDITOR=nvim
  [DEBUG]  DESKTOP_ENVIRONMENT=gnome
  [DEBUG]  CPU_VENDOR=amd
  [DEBUG]  GPU_VENDOR=amd
  [DEBUG]  GPU=amd
  [DEBUG]  GPU_DRIVER=xf86-video-amdgpu
  [DEBUG]  THEME=nordic
  [OK]  Configuration loaded successfully
  [OK]  Run checks process completed successfully
 [PROC]  Process completed successfully:  Run Checks: pre-install preparations (ID: 1728476254)
 Process start 2024-10-09 12:17:34, end 2024-10-09 12:17:40, time 00:00:06
  [DEBUG]  ======================= Ending Run Checks: pre-install preparations  =======================
 [INFO]  All processes allmost completed.....
 [INFO]  Exit handler called with exit code:  0
 [INFO]  Script execution completed successfully
 [ACTION]  Successfully executed: /home/ssnow/Documents/GitHub/arch_install/scripts/1-pre/run-checks.sh
 [INFO]  Executing: 2-drive/partition-btrfs.sh
  [DEBUG]  Start time:  2024-10-09 12:17:42
 [PROC]  Starting process:  Partitioning the install:  (ID: 1728476262) 2024-10-09 12:17:42
  [DEBUG]  ======================= Starting Partitioning the install:   =======================
 
-------------------------------------------------------------------------

                 █████╗ ██████╗  ██████ ██╗  ██╗
                ██╔══██╗██╔══██╗██╔════╝██║  ██║
                ███████║██████╔╝██║     ███████║ 
                ██╔══██║██╔══██╗██║     ██╔══██║
                ██║  ██║██║  ██║╚██████╗██║  ██║
                ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝
------------------------------------------------------------------------
                 Partitioning the install: 
------------------------------------------------------------------------

 [INFO]  Starting partition process on 
 [INFO]  DRY_RUN in partition-btrfs.sh is set to: true
 [INFO]  Install device set to: 
 [INFO]  Partitioning 
 [INFO]  Starting: Partitioning
 [ACTION]  [DRY RUN] Would execute: if mountpoint -q /mnt; then umount -A --recursive /mnt; else echo '/mnt is not mounted'; fi
  [OK]  Partition btrfs process completed successfully
 [PROC]  Process completed successfully:  Partitioning the install:  (ID: 1728476262)
 Process start 2024-10-09 12:17:42, end 2024-10-09 12:17:43, time 00:00:01
  [DEBUG]  ======================= Ending Partitioning the install:   =======================
 [INFO]  All processes allmost completed.....
 [INFO]  Exit handler called with exit code:  0
 [INFO]  Script execution completed successfully
 [ACTION]  Successfully executed: /home/ssnow/Documents/GitHub/arch_install/scripts/2-drive/partition-btrfs.sh
 [INFO]  Executing: 2-drive/format-btrfs.sh
 [ERROR]  PARTITION_EFI is not set
 [ERROR]  Failed to execute: /home/ssnow/Documents/GitHub/arch_install/scripts/2-drive/format-btrfs.sh
 [ERROR]  Installation failed
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100     3  100     3    0     0     20      0 --:--:-- --:--:-- --:--:--    20
